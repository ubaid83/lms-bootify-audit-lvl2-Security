(function(d){var b=function(g,k,i){var h=d(g).attr("data");var f=d(g).parent();if(f.hasClass("Multi")){if(d(g).hasClass("active")){d(g).removeClass("active");var j=h;i.splice(d.inArray(j,i),1)}else{d(g).addClass("active");i.push(h)}f.siblings("select").val(i)}if(!f.hasClass("Multi")){f.siblings("select").val(h);d(g).siblings("a."+k).removeClass("active");d(g).addClass("active")}};var e=function(l,k,h,j,g){var f=document.createElement("a");var i=document.createElement("div");d(f).addClass(l).addClass("mcs").html(k).appendTo(g);if(j===true){d(i).addClass("Multi")}d(i).addClass(h).appendTo(g)};var a=function(j,m,f,l,n){var g;var k;var i="";var o=d(j).parent();k+=1;var h="";if(m===true){h=d(j).text()}if(f!==null){i="' id='"+f+k}g="<a class='"+l+"' data='"+d(j).attr("value")+i+"'>"+h+"</a>";o.siblings("."+n).append(g)};var c=function(g){var f=g.find("select");f.show();if(f.next().hasClass("mcs")){f.next().remove();f.next().remove()}};d.fn.MultiColumnSelect=function(g){var f=[];var i;i=0;var h=d.extend({multiple:false,useOptionText:true,hideselect:true,openmenuClass:"mcs-open",openmenuText:"Choose An Option",openclass:"open",containerClass:"mcs-container",itemClass:"mcs-item",idprefix:null,duration:200,onOpen:null,onClose:null,onItemSelect:null},g);this.find("select").val(0);if(h.hideselect===true){this.find("select").hide()}else{this.find("select").show()}e(h.openmenuClass,h.openmenuText,h.containerClass,h.multiple,this);this.find("select option").each(function(){a(this,h.useOptionText,h.idprefix,h.itemClass,h.containerClass)});this.on("click","."+h.itemClass,function(k){var j=d(this).parent().prev().prev();if(j.val()!==null){f=j.val()}b(this,h.itemClass,f);if(d.isFunction(h.onItemSelect)){h.onItemSelect.call(this)}k.preventDefault()});this.find("."+h.openmenuClass).on("click",function(k){var j=d(this).next();if(d(this).hasClass(h.openclass)){d(this).removeClass(h.openclass);j.slideToggle("slow",function(){if(d.isFunction(h.onClose)){h.onClose.call(this)}})}else{d(this).addClass(h.openclass);j.slideToggle("slow",function(){if(d.isFunction(h.onOpen)){h.onOpen.call(this)}})}k.preventDefault()});return this};d.fn.MultiColumnSelectDestroy=function(){c(this)};d.fn.MultiColumnSelectAdditem=function(m,j,f){var n=this.find("select");var k=this.find("select options").size();n.append(d("<option/>",{value:m,text:j}));var g=n.next();if(g.hasClass("mcs")){var p=g.next();var i=p.children();var l=i.attr("class");var h="";if(typeof(f)!=="undefined"){h="' id='"+f+k}var o="<a class='"+l+" additem' data='"+m+h+"'>"+j+"</a>";p.append(o)}}}(jQuery));